<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ruoyi.mapper.PeOrderMapper">

    <select id="userOrderList" resultType="com.ruoyi.domain.vo.user.UserOrderQueryVO">
        SELECT
            pe_order.order_id,
            pe_order.order_num,
            pe_order.type,
            pe_order.time,
            pe_order.state,
            pe_order.remark,
            pe_order.details,
            pe_order.create_time,
            pe_order.customer_id,
            sys_user.nick_name service,
            sys_user.phonenumber
        FROM
            pe_order
            LEFT JOIN
            sys_user
            ON
                pe_order.service_id = sys_user.user_id
        ${ew.customSqlSegment}
    </select>

    <select id="serviceOrderList" resultType="com.ruoyi.domain.vo.service.ServiceOrderQueryVO">
        SELECT
            pe_order.order_id,
            pe_order.order_num,
            pe_order.type,
            pe_order.time,
            pe_order.state,
            pe_order.remark,
            pe_order.details,
            pe_order.create_time,
            pe_order.service_id,
            sys_user.nick_name customer,
            sys_user.phonenumber
        FROM
            pe_order
                LEFT JOIN
            sys_user
            ON
                pe_order.customer_id = sys_user.user_id
            ${ew.customSqlSegment}
    </select>


    <select id="adminOrderList" resultType="com.ruoyi.domain.vo.admin.AdminOrderQueryVO">
        SELECT
            pe_order.order_id,
            pe_order.order_num,
            pe_order.type,
            pe_order.time,
            pe_order.state,
            pe_order.remark,
            pe_order.details,
            pe_order.create_time,
            pe_order.service_id,
            pe_order.customer_id,
            customer.nick_name customer,
            service.nick_name service
        FROM
            pe_order
            LEFT JOIN
            sys_user customer
            ON
                pe_order.customer_id = customer.user_id
            LEFT JOIN
            sys_user service
            ON
                pe_order.service_id = service.user_id
            ${ew.customSqlSegment}

    </select>


</mapper>
